signal = '11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111111111000000000000000111111111111111000000000000000111111111111111000000000000000011111111111111100000000000000000000000000000000000000000001111111111111110000000000000000111111111111111000000000000000111111111111111000000000000000000000000000000000000000000011111111111111100000000000000001111111111111110000000000000001111111111111110000000000000000111111111111111000000000000000111111111111111000000000000000000000000000000000000000000001111111111111110000000000000000000000000000000000000000000111111111111111000000000000000111111111111111000000000000000111111111111111000000000000000011111111111111100000000000000001111111111111110000000000000000000000000000000000000000000111111111111111000000000000000111111111111111000000000000000011111111111111100000000000000011111111111111100000000000000001111111111111100000000000000001111111111111110000000000000000000000000000000000000000000111111111111111100000000000000011111111111111100000000000000011111111111111100000000000000011111111111111100000000000000001111111111111110000000000000000000000000000000000000000000111111111111111000000000000000011111111111111100000000000000011111111111111100000000000000011111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000';
Size = max(size(signal));

data = zeros(Size,0);

for ii = 1:Size
    data(ii) = str2num(signal(ii));
end

edges = find(diff(data) ~= 0);

bitwidth = min(diff(edges));

% f = d/dx ( integral( f dx) )

integrate = zeros(Size,0);
for ii = 1:Size
    integrate(ii) = sum(data(1:ii));
end

%differentiate over interval of bitwidth
u = [];
jj = 1;
kk = 1;
for ii = 1:floor(bitwidth):Size
    u(kk) = integrate(ii) - integrate(jj);
    jj = ii;
    kk = kk+1;
end
u = u/floor(bitwidth);

plot(u)

u(u>=0.5) = 1;
u(u < 0.5) = 0;

u = num2str(u);

u = strcat(u);

u(u == ' ') = []
